ejs <%- include('../partials/header') %>

<h2>Edit Book: <%= book.title %></h2>

<% if (locals.error) { %>
    <p class="message error-message"><%= error %></p>
<% } %>

<form action="/books/<%= book._id %>?_method=PUT" method="POST">
    <div>
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" value="<%= book.title %>" required>
    </div>
    <div>
        <label for="author">Author:</label>
        <input type="text" id="author" name="author" value="<%= book.author %>" required>
    </div>
    <div>
        <label for="genre">Genre:</label> <%# NEW FIELD %>
        <input type="text" id="genre" name="genre" value="<%= book.genre || '' %>" placeholder="e.g., Fiction, Science, History">
    </div>
    <div>
        <label for="isbn">ISBN (Optional):</label>
        <input type="text" id="isbn" name="isbn" value="<%= book.isbn || '' %>">
    </div>
    <div>
        <label for="description">Description (Optional):</label>
        <textarea id="description" name="description" rows="5"><%= book.description || '' %></textarea>
    </div>
    <div>
        <label for="coverImage">Cover Image URL (Optional):</label>
        <input type="url" id="coverImage" name="coverImage" value="<%= book.coverImage || '' %>" placeholder="http://example.com/image.jpg">
    </div>
    <button type="submit" class="btn btn-secondary">Update Book</button>
</form>

<p><a href="/books/<%= book._id %>">&laquo; Cancel and Back to Book</a></p>
<p><a href="/books">&laquo; Back to All Books</a></p>

<%- include('../partials/footer') %>